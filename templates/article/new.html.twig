{% extends 'base_app_admin.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <!-- Smart Forms CSS -->
    <link href="{{ asset('smartforms/Templates/css/smart-loader.css') }}" rel="stylesheet"/>
    <link href="{{ asset('smartforms/Templates/css/smart-addons.css') }}" rel="stylesheet"/>
    <link href="{{ asset('smartforms/Templates/css/smart-forms.css') }}" rel="stylesheet"/>
    <link href="{{ asset('css/plugins/summernote/summernote-bs4.css') }}" rel="stylesheet">
{% endblock %}

{% block title %}Cr√©er un article{% endblock %}

{% block bodyApp %}
    </p>

    {{ include('article/_form.html.twig') }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/plugins/summernote/summernote-bs4.js') }}"></script>
    <script src="{{ asset('assets/js/plugins/datapicker/bootstrap-datepicker.js') }}"></script>

    <script>

        $(document).ready(function () {
            $('.summernote').summernote({
                height: 400,
                callbacks: {
                    onImageUpload: function (image) {
                        uploadImage(image[0])
                    }
                }
            });

            function uploadImage(image) {
                var data = new FormData();
                data.append("image", image);
                $.ajax({
                    data: data,
                    type: "POST",
                    url: "{{ path('admin_article_uploadimage') }}",// this file uploads the picture and
                    // returns a chain containing the path
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (url) {
                        $('#summernote').summernote("insertImage",'{{ asset('article/content/articleImageContent_5f457e47c329b.png') }}');
                    },
                    error: function (data) {
                        console.log(data);
                    }
                });
            }
        });
    </script>

{% endblock %}
